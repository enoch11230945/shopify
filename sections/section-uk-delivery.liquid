{%- comment -%}
  London_Emotion_Engine - UK Delivery Info Section
  Displays delivery timelines and builds trust for UK customers
  Critical for managing expectations per PRD Risk Mitigation Protocol
{%- endcomment -%}

<section class="uk-delivery section-style-{{ section.id }}"
         style="background-color: {{ section.settings.bg_color }}; padding: {{ section.settings.padding }};">
  <div class="container">
    
    {%- if section.settings.section_title != blank -%}
      <div class="section-header text-center mb-4">
        <h2 class="section-title h4">{{ section.settings.section_title }}</h2>
      </div>
    {%- endif -%}
    
    <div class="delivery-grid">
      {%- for block in section.blocks -%}
        <div class="delivery-card {{ block.settings.highlight ? 'highlighted' : '' }}" {{ block.shopify_attributes }}>
          
          <div class="delivery-icon">
            {%- case block.settings.icon_type -%}
              {%- when 'standard' -%}
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <rect x="1" y="3" width="15" height="13"></rect>
                  <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"></polygon>
                  <circle cx="5.5" cy="18.5" r="2.5"></circle>
                  <circle cx="18.5" cy="18.5" r="2.5"></circle>
                </svg>
              {%- when 'express' -%}
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                </svg>
              {%- when 'gift' -%}
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <polyline points="20 12 20 22 4 22 4 12"></polyline>
                  <rect x="2" y="7" width="20" height="5"></rect>
                  <line x1="12" y1="22" x2="12" y2="7"></line>
                  <path d="M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"></path>
                  <path d="M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"></path>
                </svg>
              {%- when 'clock' -%}
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <circle cx="12" cy="12" r="10"></circle>
                  <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
              {%- else -%}
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                  <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            {%- endcase -%}
          </div>
          
          <h3 class="delivery-title">{{ block.settings.title }}</h3>
          <p class="delivery-time">{{ block.settings.delivery_time }}</p>
          <p class="delivery-desc">{{ block.settings.description }}</p>
          
          {%- if block.settings.price != blank -%}
            <span class="delivery-price">{{ block.settings.price }}</span>
          {%- endif -%}
          
        </div>
      {%- endfor -%}
    </div>
    
    {%- if section.settings.show_disclaimer -%}
      <div class="delivery-disclaimer">
        <p>{{ section.settings.disclaimer_text }}</p>
      </div>
    {%- endif -%}
    
  </div>
</section>

<style>
.uk-delivery {
  border-top: 1px solid #eee;
  border-bottom: 1px solid #eee;
}

.uk-delivery .section-title {
  font-weight: 400;
  color: #1a1a1a;
}

.delivery-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 24px;
}

.delivery-card {
  background: #fff;
  border: 1px solid #eee;
  border-radius: 12px;
  padding: 2rem;
  text-align: center;
  transition: all 0.3s ease;
}

.delivery-card:hover {
  border-color: #d4a574;
  box-shadow: 0 8px 30px rgba(0,0,0,0.08);
}

.delivery-card.highlighted {
  border-color: #d4a574;
  background: linear-gradient(135deg, rgba(212,165,116,0.05), rgba(196,148,100,0.05));
}

.delivery-icon {
  width: 64px;
  height: 64px;
  border-radius: 50%;
  background: #faf9f8;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 1.25rem;
  color: #d4a574;
}

.delivery-card.highlighted .delivery-icon {
  background: linear-gradient(135deg, #d4a574, #c49464);
  color: #fff;
}

.delivery-title {
  font-size: 1.1rem;
  font-weight: 600;
  color: #1a1a1a;
  margin-bottom: 0.5rem;
}

.delivery-time {
  font-size: 1.5rem;
  font-weight: 300;
  color: #d4a574;
  margin-bottom: 0.75rem;
}

.delivery-desc {
  font-size: 0.9rem;
  color: #666;
  line-height: 1.6;
  margin-bottom: 1rem;
}

.delivery-price {
  display: inline-block;
  background: #f5f5f5;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-size: 0.85rem;
  font-weight: 600;
  color: #1a1a1a;
}

.delivery-card.highlighted .delivery-price {
  background: #d4a574;
  color: #fff;
}

.delivery-disclaimer {
  text-align: center;
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 1px solid #eee;
}

.delivery-disclaimer p {
  font-size: 0.8rem;
  color: #999;
  margin: 0;
}

@media (max-width: 768px) {
  .delivery-grid {
    grid-template-columns: 1fr;
  }
  
  .delivery-card {
    padding: 1.5rem;
  }
}
</style>

{% schema %}
{
  "name": "UK Delivery Info",
  "tag": "section",
  "class": "section section--uk-delivery",
  "settings": [
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background colour",
      "default": "#faf9f8"
    },
    {
      "type": "text",
      "id": "padding",
      "label": "Padding",
      "default": "60px 0"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section title",
      "default": "UK Delivery"
    },
    {
      "type": "checkbox",
      "id": "show_disclaimer",
      "label": "Show disclaimer",
      "default": true
    },
    {
      "type": "textarea",
      "id": "disclaimer_text",
      "label": "Disclaimer text",
      "default": "Delivery times are estimates and may vary during peak periods. Orders placed after the cutoff date may not arrive in time for the occasion."
    }
  ],
  "blocks": [
    {
      "type": "delivery_option",
      "name": "Delivery Option",
      "settings": [
        {
          "type": "select",
          "id": "icon_type",
          "label": "Icon",
          "options": [
            { "value": "standard", "label": "Delivery Van" },
            { "value": "express", "label": "Lightning" },
            { "value": "gift", "label": "Gift Box" },
            { "value": "clock", "label": "Clock" },
            { "value": "check", "label": "Checkmark" }
          ],
          "default": "standard"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "UK Stock"
        },
        {
          "type": "text",
          "id": "delivery_time",
          "label": "Delivery time",
          "default": "2-3 days"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Ships from our UK facility via Royal Mail 2nd Class"
        },
        {
          "type": "text",
          "id": "price",
          "label": "Price",
          "default": "FREE"
        },
        {
          "type": "checkbox",
          "id": "highlight",
          "label": "Highlight this option",
          "default": false
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "UK Delivery Info",
      "blocks": [
        {
          "type": "delivery_option",
          "settings": {
            "icon_type": "standard",
            "title": "UK Stock",
            "delivery_time": "2-3 days",
            "description": "Ships from our UK facility via Royal Mail 2nd Class",
            "price": "FREE",
            "highlight": true
          }
        },
        {
          "type": "delivery_option",
          "settings": {
            "icon_type": "express",
            "title": "Express Delivery",
            "delivery_time": "Next day",
            "description": "Royal Mail Tracked 24 - order before 2pm",
            "price": "+Â£3.50"
          }
        },
        {
          "type": "delivery_option",
          "settings": {
            "icon_type": "gift",
            "title": "Gift Ready",
            "delivery_time": "Included",
            "description": "Luxury box, velvet pouch, and message card",
            "price": "FREE"
          }
        }
      ]
    }
  ]
}
{% endschema %}
